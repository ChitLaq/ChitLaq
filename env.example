# ChitLaq M1 MVP - Environment Configuration
# Copy this file to .env and fill in your values

#####################################
# GENERAL SETTINGS
#####################################
NODE_ENV=production
APP_NAME=ChitLaq
APP_VERSION=1.0.0
SITE_URL=https://chitlaq.com
API_EXTERNAL_URL=https://api.chitlaq.com

#####################################
# DATABASE CONFIGURATION
#####################################
POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_super_secure_password_here
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Connection pool settings
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_POOL_SIZE=20

#####################################
# JWT & AUTHENTICATION
#####################################
JWT_SECRET=your_jwt_secret_minimum_32_characters_long
JWT_EXPIRY=3600
SECRET_KEY_BASE=your_secret_key_base_minimum_64_characters_long_for_realtime

# Supabase API Keys (generate these)
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlvdXJfcHJvamVjdF9pZCIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjQ1NzA4MjQ4LCJleHAiOjE5NjEyODQyNDh9.your_anon_key_here
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlvdXJfcHJvamVjdF9pZCIsInJvbGUiOiJzZXJ2aWNlX3JvbGUiLCJpYXQiOjE2NDU3MDgyNDgsImV4cCI6MTk2MTI4NDI0OH0.your_service_role_key_here

#####################################
# AUTHENTICATION SETTINGS
#####################################
DISABLE_SIGNUP=false
ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=false
ADDITIONAL_REDIRECT_URLS=http://localhost:3000,https://chitlaq.com

# Rate limiting
GOTRUE_RATE_LIMIT_EMAIL_SENT=3
GOTRUE_RATE_LIMIT_SMS_SENT=3
GOTRUE_RATE_LIMIT_VERIFY=5

#####################################
# EMAIL CONFIGURATION (SMTP)
#####################################
SMTP_ADMIN_EMAIL=admin@chitlaq.com
SMTP_HOST=smtp.resend.com
SMTP_PORT=587
SMTP_USER=resend
SMTP_PASS=your_smtp_password_here
SMTP_SENDER_NAME=ChitLaq

# Email URL paths
MAILER_URLPATHS_INVITE=/auth/invite
MAILER_URLPATHS_CONFIRMATION=/auth/confirm
MAILER_URLPATHS_RECOVERY=/auth/reset-password
MAILER_URLPATHS_EMAIL_CHANGE=/auth/update-email

#####################################
# REDIS CONFIGURATION
#####################################
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_MEMORY=512mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

#####################################
# STORAGE CONFIGURATION
#####################################
STORAGE_BACKEND=file
FILE_SIZE_LIMIT=52428800
ENABLE_IMAGE_TRANSFORMATION=true
STORAGE_PATH=/var/lib/storage

#####################################
# MONITORING & ANALYTICS
#####################################
GRAFANA_USER=admin
GRAFANA_PASSWORD=your_grafana_password_here
GRAFANA_ROOT_URL=https://grafana.chitlaq.com

# Prometheus settings
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_STORAGE_PATH=/prometheus

#####################################
# SSL & SECURITY
#####################################
SSL_EMAIL=admin@chitlaq.com
DOMAIN=chitlaq.com
STAGING=false

#####################################
# RATE LIMITING
#####################################
RATE_LIMIT_WINDOW=900
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_REDIS_PREFIX=rl:

#####################################
# LOGGING
#####################################
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=/var/log/chitlaq/app.log

#####################################
# UNIVERSITY INTEGRATION
#####################################
UNIVERSITY_EMAIL_DOMAINS=edu.tr,ac.uk,edu,ac.in
ALLOWED_EMAIL_PREFIXES=cs_,eng_,med_,law_,bus_,art_

#####################################
# SOCIAL FEATURES
#####################################
MAX_FOLLOWERS_PER_USER=10000
MAX_FOLLOWING_PER_USER=2000
MAX_POSTS_PER_DAY=50
MAX_MESSAGES_PER_DAY=500

#####################################
# CONTENT MODERATION
#####################################
ENABLE_CONTENT_MODERATION=true
AUTO_MODERATION_THRESHOLD=0.8

#####################################
# SEARCH CONFIGURATION
#####################################
SEARCH_ENGINE=postgresql
SEARCH_INDEX_UPDATE_INTERVAL=60

#####################################
# REAL-TIME FEATURES
#####################################
REALTIME_MAX_CONNECTIONS=10000
REALTIME_HEARTBEAT_INTERVAL=30000
REALTIME_MAX_CHANNELS_PER_CLIENT=100

#####################################
# BACKUP CONFIGURATION
#####################################
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_KEY=your_backup_encryption_key_here

#####################################
# PERFORMANCE TUNING
#####################################
MAX_WORKER_PROCESSES=auto
WORKER_CONNECTIONS=1024
KEEPALIVE_TIMEOUT=65
CLIENT_MAX_BODY_SIZE=50M

#####################################
# FEATURE FLAGS
#####################################
ENABLE_REAL_TIME_MESSAGING=true
ENABLE_VIDEO_UPLOAD=false
ENABLE_GROUP_MESSAGING=false
